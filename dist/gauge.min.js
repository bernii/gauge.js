(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g=Object.prototype.hasOwnProperty,y=function(e,t){function r(){this.constructor=e}for(var n in t){if(g.call(t,n))e[n]=t[n]}r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e};(function(){var e,t,n,r,i,s,o;i=["ms","moz","webkit","o"];for(s=0,o=i.length;s<o;s++){r=i[s];if(window.requestAnimationFrame){break}window.requestAnimationFrame=window[r+"RequestAnimationFrame"];window.cancelAnimationFrame=window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"]}e=null;n=0;t={};if(!requestAnimationFrame){window.requestAnimationFrame=function(e,t){var n,r,i,s;n=(new Date).getTime();s=Math.max(0,16-(n-i));r=window.setTimeout(function(){return e(n+s)},s);i=n+s;return r};return window.cancelAnimationFrame=function(e){return clearTimeout(e)}}else if(!window.cancelAnimationFrame){e=window.requestAnimationFrame;window.requestAnimationFrame=function(r,i){var s;s=++n;e(function(){if(!t[s]){return r()}},i);return s};return window.cancelAnimationFrame=function(e){return t[e]=true}}})();String.prototype.hashCode=function(){var e,t,n,r,i;t=0;if(this.length===0){return t}for(n=r=0,i=this.length;0<=i?r<i:r>i;n=0<=i?++r:--r){e=this.charCodeAt(n);t=(t<<5)-t+e;t=t&t}return t};d=function(e){var t,n;t=Math.floor(e/3600);n=Math.floor((e-t*3600)/60);e-=t*3600+n*60;e+="";n+="";while(n.length<2){n="0"+n}while(e.length<2){e="0"+e}t=t?t+":":"";return t+n+":"+e};h=function(e){return l(e.toFixed(0))};p=function(e,t){var n,r,i;r={};for(n in e){if(!g.call(e,n))continue;i=e[n];r[n]=i}for(n in t){if(!g.call(t,n))continue;i=t[n];r[n]=i}return r};l=function(e){var t,n,r,i;e+="";n=e.split(".");r=n[0];i="";if(n.length>1){i="."+n[1]}t=/(\d+)(\d{3})/;while(t.test(r)){r=r.replace(t,"$1"+","+"$2")}return r+i};c=function(e){if(e.charAt(0)==="#"){return e.substring(1,7)}return e};f=function(){function e(e,t){if(e==null){e=true}this.clear=t!=null?t:true;if(e){AnimationUpdater.add(this)}}e.prototype.animationSpeed=32;e.prototype.update=function(e){var t;if(e==null){e=false}if(e||this.displayedValue!==this.value){if(this.ctx&&this.clear){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}t=this.value-this.displayedValue;if(Math.abs(t/this.animationSpeed)<=.001){this.displayedValue=this.value}else{this.displayedValue=this.displayedValue+t/this.animationSpeed}this.render();return true}return false};return e}();i=function(e){function t(){v=t.__super__.constructor.apply(this,arguments);return v}y(t,e);t.prototype.displayScale=1;t.prototype.setTextField=function(e){return this.textField=e instanceof a?e:new a(e)};t.prototype.setMinValue=function(e,t){var n,r,i,s,o;this.minValue=e;if(t==null){t=true}if(t){this.displayedValue=this.minValue;s=this.gp||[];o=[];for(r=0,i=s.length;r<i;r++){n=s[r];o.push(n.displayedValue=this.minValue)}return o}};t.prototype.setOptions=function(e){if(e==null){e=null}this.options=p(this.options,e);if(this.textField){this.textField.el.style.fontSize=e.fontSize+"px"}if(this.options.angle>.5){this.gauge.options.angle=.5}this.configDisplayScale();return this};t.prototype.configDisplayScale=function(){var e,t,n,r,i;r=this.displayScale;if(this.options.highDpiSupport===false){delete this.displayScale}else{t=window.devicePixelRatio||1;e=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1;this.displayScale=t/e}if(this.displayScale!==r){i=this.canvas.G__width||this.canvas.width;n=this.canvas.G__height||this.canvas.height;this.canvas.width=i*this.displayScale;this.canvas.height=n*this.displayScale;this.canvas.style.width=""+i+"px";this.canvas.style.height=""+n+"px";this.canvas.G__width=i;this.canvas.G__height=n}return this};return t}(f);a=function(){function e(e){this.el=e}e.prototype.render=function(e){return this.el.innerHTML=h(e.displayedValue)};return e}();e=function(e){function t(e,t){this.elem=e;this.text=t!=null?t:false;this.value=1*this.elem.innerHTML;if(this.text){this.value=0}}y(t,e);t.prototype.displayedValue=0;t.prototype.value=0;t.prototype.setVal=function(e){return this.value=1*e};t.prototype.render=function(){var e;if(this.text){e=d(this.displayedValue.toFixed(0))}else{e=l(h(this.displayedValue))}return this.elem.innerHTML=e};return t}(f);t={create:function(t){var n,r,i,s;r=[];for(i=0,s=t.length;i<s;i++){n=t[i];r.push(new e(n))}return r}};u=function(e){function t(e){this.gauge=e;this.ctx=this.gauge.ctx;this.canvas=this.gauge.canvas;t.__super__.constructor.call(this,false,false);this.setOptions(this.gauge.options.pointer)}y(t,e);t.prototype.displayedValue=0;t.prototype.value=0;t.prototype.options={strokeWidth:.035,length:.1,color:"#000000"};t.prototype.setOptions=function(e){if(e==null){e=null}this.options=p(this.options,e);this.length=this.canvas.height*this.options.length;this.strokeWidth=this.canvas.height*this.options.strokeWidth;this.maxValue=this.gauge.maxValue;this.minValue=this.gauge.minValue;this.animationSpeed=this.gauge.animationSpeed;return this.options.angle=this.gauge.options.angle};t.prototype.render=function(){var e,t,n,r,i,s,o,u,a;e=this.gauge.getAngle.call(this,this.displayedValue);t=this.canvas.width/2;n=this.canvas.height*.9;u=Math.round(t+this.length*Math.cos(e));a=Math.round(n+this.length*Math.sin(e));s=Math.round(t+this.strokeWidth*Math.cos(e-Math.PI/2));o=Math.round(n+this.strokeWidth*Math.sin(e-Math.PI/2));r=Math.round(t+this.strokeWidth*Math.cos(e+Math.PI/2));i=Math.round(n+this.strokeWidth*Math.sin(e+Math.PI/2));this.ctx.fillStyle=this.options.color;this.ctx.beginPath();this.ctx.arc(t,n,this.strokeWidth,0,Math.PI*2,true);this.ctx.fill();this.ctx.beginPath();this.ctx.moveTo(s,o);this.ctx.lineTo(u,a);this.ctx.lineTo(r,i);return this.ctx.fill()};return t}(f);n=function(){function e(e){this.elem=e}e.prototype.updateValues=function(e){this.value=e[0];this.maxValue=e[1];this.avgValue=e[2];return this.render()};e.prototype.render=function(){var e,t;if(this.textField){this.textField.text(h(this.value))}if(this.maxValue===0){this.maxValue=this.avgValue*2}t=this.value/this.maxValue*100;e=this.avgValue/this.maxValue*100;$(".bar-value",this.elem).css({width:t+"%"});return $(".typical-value",this.elem).css({width:e+"%"})};return e}();o=function(e){function t(e){this.canvas=e;t.__super__.constructor.call(this);this.percentColors=null;if(typeof G_vmlCanvasManager!=="undefined"){this.canvas=window.G_vmlCanvasManager.initElement(this.canvas)}this.ctx=this.canvas.getContext("2d");this.gp=[new u(this)];this.setOptions();this.render()}y(t,e);t.prototype.elem=null;t.prototype.value=[20];t.prototype.maxValue=80;t.prototype.minValue=0;t.prototype.displayedAngle=0;t.prototype.displayedValue=0;t.prototype.lineWidth=40;t.prototype.paddingBottom=.1;t.prototype.percentColors=null;t.prototype.options={colorStart:"#6fadcf",colorStop:void 0,gradientType:0,strokeColor:"#e0e0e0",pointer:{length:.8,strokeWidth:.035},angle:.15,lineWidth:.44,fontSize:40,limitMax:false};t.prototype.setOptions=function(e){var n,r,i,s;if(e==null){e=null}t.__super__.setOptions.call(this,e);this.configPercentColors();this.lineWidth=this.canvas.height*(1-this.paddingBottom)*this.options.lineWidth;this.radius=this.canvas.height*(1-this.paddingBottom)-this.lineWidth;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.render();s=this.gp;for(r=0,i=s.length;r<i;r++){n=s[r];n.setOptions(this.options.pointer);n.render()}return this};t.prototype.configPercentColors=function(){var e,t,n,r,i,s,o;this.percentColors=null;if(this.options.percentColors!==void 0){this.percentColors=new Array;o=[];for(n=i=0,s=this.options.percentColors.length-1;0<=s?i<=s:i>=s;n=0<=s?++i:--i){r=parseInt(c(this.options.percentColors[n][1]).substring(0,2),16);t=parseInt(c(this.options.percentColors[n][1]).substring(2,4),16);e=parseInt(c(this.options.percentColors[n][1]).substring(4,6),16);o.push(this.percentColors[n]={pct:this.options.percentColors[n][0]>1?this.options.percentColors[n][0]/100:this.options.percentColors[n][0],color:{r:r,g:t,b:e}})}return o}};t.prototype.set=function(e){var t,n,r,i,s,o,a;if(!(e instanceof Array)){e=[e]}if(e.length>this.gp.length){for(t=i=0,a=e.length-this.gp.length;0<=a?i<a:i>a;t=0<=a?++i:--i){this.gp.push(new u(this))}}t=0;n=false;var f={maxValue:this.maxValue,angle:this.options.angle};for(s=0,o=e.length;s<o;s++){r=e[s];if(r>this.maxValue){this.maxValue=this.value*1.1;f.maxValue=this.maxValue;n=true}this.gp[t].value=r;this.gp[t++].setOptions(f)}this.value=e[e.length-1];if(n){if(!this.options.limitMax){return AnimationUpdater.run()}}else{return AnimationUpdater.run()}};t.prototype.getAngle=function(e){return(1+this.options.angle)*Math.PI+(e-this.minValue)/(this.maxValue-this.minValue)*(1-this.options.angle*2)*Math.PI};t.prototype.getColorForPercentage=function(e,t){var n,r,i,s,o,u,a;if(e<=this.percentColors[0].pct){n=this.percentColors[0].color}else{n=this.percentColors[this.percentColors.length-1].color;for(i=u=0,a=this.percentColors.length-1;0<=a?u<=a:u>=a;i=0<=a?++u:--u){if(e<=this.percentColors[i].pct){if(t===true){o=this.percentColors[i-1];r=this.percentColors[i];s=(e-o.pct)/(r.pct-o.pct);n={r:Math.floor(o.color.r*(1-s)+r.color.r*s),g:Math.floor(o.color.g*(1-s)+r.color.g*s),b:Math.floor(o.color.b*(1-s)+r.color.b*s)}}else{n=this.percentColors[i].color}break}}}return"rgb("+[n.r,n.g,n.b].join(",")+")"};t.prototype.getColorForValue=function(e,t){var n;n=(e-this.minValue)/(this.maxValue-this.minValue);return this.getColorForPercentage(n,t)};t.prototype.render=function(){var e,t,n,r,i,s,o,u,a;i=this.canvas.width/2;r=this.canvas.height*(1-this.paddingBottom);e=this.getAngle(this.displayedValue);if(this.textField){this.textField.render(this)}this.ctx.lineCap="butt";if(this.options.customFillStyle!==void 0){t=this.options.customFillStyle(this)}else if(this.percentColors!==null){t=this.getColorForValue(this.displayedValue,true)}else if(this.options.colorStop!==void 0){if(this.options.gradientType===0){t=this.ctx.createRadialGradient(i,r,9,i,r,70)}else{t=this.ctx.createLinearGradient(0,0,this.canvas.width,0)}if(this.options.gradientColors){var f=this.options.gradientColors;for(var l=0;l<f.length;l++)t.addColorStop(f[l][0],f[l][1])}else{t.addColorStop(0,this.options.colorStart);t.addColorStop(1,this.options.colorStop)}}else{t=this.options.colorStart}this.ctx.strokeStyle=t;this.ctx.beginPath();this.ctx.arc(i,r,this.radius,(1+this.options.angle)*Math.PI,e,false);this.ctx.lineWidth=this.lineWidth;this.ctx.stroke();this.ctx.strokeStyle=this.options.strokeColor;this.ctx.beginPath();this.ctx.arc(i,r,this.radius,e,(2-this.options.angle)*Math.PI,false);this.ctx.stroke();u=this.gp;a=[];for(s=0,o=u.length;s<o;s++){n=u[s];a.push(n.update(true))}return a};return t}(i);r=function(e){function t(e){this.canvas=e;t.__super__.constructor.call(this);if(typeof G_vmlCanvasManager!=="undefined"){this.canvas=window.G_vmlCanvasManager.initElement(this.canvas)}this.ctx=this.canvas.getContext("2d");this.setOptions();this.render()}y(t,e);t.prototype.lineWidth=15;t.prototype.displayedValue=0;t.prototype.value=33;t.prototype.maxValue=80;t.prototype.minValue=0;t.prototype.options={lineWidth:.1,colorStart:"#6f6ea0",colorStop:"#c0c0db",strokeColor:"#eeeeee",shadowColor:"#d5d5d5",angle:.35};t.prototype.getAngle=function(e){return(1-this.options.angle)*Math.PI+(e-this.minValue)/(this.maxValue-this.minValue)*(2+this.options.angle-(1-this.options.angle))*Math.PI};t.prototype.setOptions=function(e){if(e==null){e=null}t.__super__.setOptions.call(this,e);this.lineWidth=this.canvas.height*this.options.lineWidth;this.radius=this.canvas.height/2-this.lineWidth/2;return this};t.prototype.set=function(e){this.value=e;if(this.value>this.maxValue){this.maxValue=this.value*1.1}return AnimationUpdater.run()};t.prototype.render=function(){var e,t,n,r,i,s;e=this.getAngle(this.displayedValue);s=this.canvas.width/2;n=this.canvas.height/2;if(this.textField){this.textField.render(this)}t=this.ctx.createRadialGradient(s,n,39,s,n,70);t.addColorStop(0,this.options.colorStart);t.addColorStop(1,this.options.colorStop);r=this.radius-this.lineWidth/2;i=this.radius+this.lineWidth/2;this.ctx.strokeStyle=this.options.strokeColor;this.ctx.beginPath();this.ctx.arc(s,n,this.radius,(1-this.options.angle)*Math.PI,(2+this.options.angle)*Math.PI,false);this.ctx.lineWidth=this.lineWidth;this.ctx.lineCap="round";this.ctx.stroke();this.ctx.strokeStyle=t;this.ctx.beginPath();this.ctx.arc(s,n,this.radius,(1-this.options.angle)*Math.PI,e,false);return this.ctx.stroke()};return t}(i);s=function(e){function t(){m=t.__super__.constructor.apply(this,arguments);return m}y(t,e);t.prototype.strokeGradient=function(e,t,n,r){var i;i=this.ctx.createRadialGradient(e,t,n,e,t,r);i.addColorStop(0,this.options.shadowColor);i.addColorStop(.12,this.options._orgStrokeColor);i.addColorStop(.88,this.options._orgStrokeColor);i.addColorStop(1,this.options.shadowColor);return i};t.prototype.setOptions=function(e){var n,r,i,s;if(e==null){e=null}t.__super__.setOptions.call(this,e);s=this.canvas.width/2;n=this.canvas.height/2;r=this.radius-this.lineWidth/2;i=this.radius+this.lineWidth/2;this.options._orgStrokeColor=this.options.strokeColor;this.options.strokeColor=this.strokeGradient(s,n,r,i);return this};return t}(r);window.AnimationUpdater={elements:[],animId:null,addAll:function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++){t=e[n];i.push(AnimationUpdater.elements.push(t))}return i},add:function(e){return AnimationUpdater.elements.push(e)},run:function(){var e,t,n,r,i;e=true;i=AnimationUpdater.elements;for(n=0,r=i.length;n<r;n++){t=i[n];if(t.update()){e=false}}if(!e){return AnimationUpdater.animId=requestAnimationFrame(AnimationUpdater.run)}else{return cancelAnimationFrame(AnimationUpdater.animId)}}};window.Gauge=o;window.Donut=s;window.BaseDonut=r;window.TextRenderer=a}).call(this)
